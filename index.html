<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TonFiles Market</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>TonFiles</h1>
    <nav class="tabs">
      <button class="active" onclick="switchTab('market', this)">Маркет</button>
      <button onclick="switchTab('add', this)">Добавить</button>
      <button onclick="switchTab('profile', this)">Профиль</button>
    </nav>
  </header>

  <!-- Маркет -->
  <section id="market" class="section active">
    <div class="filters">
      <div class="filter-row">
        <input type="text" id="search-input" placeholder="Поиск..." oninput="render()">
        <button onclick="render()">Применить</button>
      </div>
      <div class="filter-row">
        <input type="number" id="min-price" placeholder="Мин цена" oninput="render()">
        <input type="number" id="max-price" placeholder="Макс цена" oninput="render()">
      </div>
    </div>
    <div id="market-grid" class="grid"></div>
  </section>

  <!-- Добавление -->
  <section id="add" class="section">
    <div class="add-form">
      <input id="add-name" placeholder="Название товара">
      <textarea id="add-desc" placeholder="Описание"></textarea>
      <input type="number" id="add-price" placeholder="Цена TON" oninput="updateCommission()">
      <p id="commission-info">Вы получите: 0.00 TON (с учетом комиссии 10%)</p>
      <label class="file-upload">
        Загрузить превью
        <input type="file" id="add-preview" accept="image/*">
      </label>
      <label class="file-upload">
        Загрузить файл
        <input type="file" id="add-file">
      </label>
      <button class="btn btn-primary" onclick="publish()">Опубликовать</button>
    </div>
  </section>

  <!-- Профиль -->
  <section id="profile" class="section">
    <div class="profile-header">
      <p>Баланс: <span id="balance">0.00</span> TON</p>
      <div class="ref-block">
        <p>Реф. баланс: <span id="ref-balance">0.00</span> TON</p>
        <p class="ref-info">2% от трат рефералов</p>
        <button onclick="withdrawRef()">Вывести</button>
      </div>
    </div>

    <div class="profile-tabs">
      <button class="active" onclick="switchProfileTab('purchases', this)">Мои покупки</button>
      <button onclick="switchProfileTab('myitems', this)">Мои товары</button>
    </div>

    <input type="text" id="profile-search" placeholder="Поиск покупок..." oninput="render()">

    <div id="purchases" class="profile-section active">
      <div id="purchases-grid" class="grid"></div>
      <p id="purchases-empty" class="empty">Пусто</p>
    </div>
    <div id="myitems" class="profile-section">
      <div id="myitems-grid" class="grid"></div>
      <p id="myitems-empty" class="empty">Пусто</p>
    </div>
  </section>

  <!-- Модалка -->
  <div id="modal" class="modal">
    <div class="modal-card" id="modal-card"></div>
  </div>

  <!-- Тост -->
  <div id="toast"></div>

  <script src="app.js"></script>
</body>
</html>
