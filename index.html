<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>TONFiles Market</title>
<style>
:root {
  --bg:#0f1220; --card:#171a2a; --text:#e8ebff; --muted:#9aa3c7;
  --accent:#6ea8ff; --accent-2:#7b6cff; --btn:#2a2f45; --btn-hover:#343a55;
  --shadow:0 10px 30px rgba(0,0,0,0.25); --radius:18px;
}
body{margin:0; font-family:sans-serif; background:var(--bg); color:var(--text);}
.wrap{max-width:1100px; margin:0 auto; padding:16px;}
header{display:flex; justify-content:space-between; align-items:center; padding:16px;}
h1{font-size:20px;}
/* –§–∏–ª—å—Ç—Ä—ã –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ */
.controls{display:flex; flex-wrap:wrap; gap:10px; margin-bottom:16px;}
.filter-btn{padding:8px 14px; border-radius:12px; background:var(--btn); color:var(--text); border:none; cursor:pointer;}
.filter-btn.active{background:linear-gradient(135deg,var(--accent),var(--accent-2));}
.sort-select{padding:8px 14px; border-radius:12px; border:none; background:var(--btn); color:var(--text);}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px;}
.card{background:var(--card);border-radius:var(--radius);padding:14px;
  box-shadow:var(--shadow);display:flex;flex-direction:column;gap:10px;
  text-align:center;align-items:center;transition:.2s;}
.card:hover{transform:scale(1.03);box-shadow:0 15px 35px rgba(0,0,0,0.35);}
.name{font-size:15px;font-weight:600;}
.price{color:var(--accent);font-weight:700;}
.btn{margin-top:8px;padding:10px 12px;border-radius:12px;
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  color:white;border:none;font-weight:700;cursor:pointer;box-shadow:var(--shadow);}
.floating-cart{position:fixed;bottom:20px;right:20px;background:linear-gradient(135deg,var(--accent),var(--accent-2));
  color:#fff;border:none;border-radius:50%;width:60px;height:60px;
  display:flex;justify-content:center;align-items:center;font-size:22px;font-weight:700;
  box-shadow:var(--shadow);cursor:pointer;z-index:999;text-decoration:none;}
.floating-cart span{font-size:14px;background:#ff4444;border-radius:50%;padding:2px 6px;margin-left:4px;}
/* Toaster */
#toaster{position:fixed;top:20px;right:20px;z-index:1000;}
.toast{background:var(--card);padding:12px 18px;margin-top:10px;border-radius:12px;box-shadow:var(--shadow);opacity:0;transform:translateX(100%);transition:.3s;}
.toast.show{opacity:1;transform:translateX(0);}
</style>
</head>
<body>
<header class="wrap">
  <h1>üíé TONFiles Market</h1>
</header>

<main class="wrap">
  <div class="controls">
    <button class="filter-btn active" data-category="all">–í—Å–µ</button>
    <button class="filter-btn" data-category="guides">–ì–∞–π–¥—ã</button>
    <button class="filter-btn" data-category="scripts">–°–∫—Ä–∏–ø—Ç—ã</button>
    <button class="filter-btn" data-category="files">–§–∞–π–ª—ã</button>
    <select class="sort-select" id="sortSelect">
      <option value="popular">–ü–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏</option>
      <option value="price-asc">–ü–æ —Ü–µ–Ω–µ (‚Üë)</option>
      <option value="price-desc">–ü–æ —Ü–µ–Ω–µ (‚Üì)</option>
    </select>
  </div>

  <div class="grid" id="grid"></div>
</main>

<a href="#" class="floating-cart" id="cartBtn">üõí<span id="cartCount">0</span></a>
<div id="toaster"></div>

<script>
const products = [
  {id:1,name:"–ì–∞–π–¥ –ø–æ TON",price:5,category:"guides",popularity:90},
  {id:2,name:"–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ—Ç–æ—Ä–≥–æ–≤–ª–∏",price:12,category:"scripts",popularity:75},
  {id:3,name:"–§–∞–π–ª —Å NFT-—à–∞–±–ª–æ–Ω–∞–º–∏",price:8,category:"files",popularity:60},
  {id:4,name:"–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –≥–∞–π–¥",price:15,category:"guides",popularity:95},
  {id:5,name:"–°–∫—Ä–∏–ø—Ç-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞",price:20,category:"scripts",popularity:40},
];

function getCart(){return JSON.parse(localStorage.getItem("cart")||"[]");}
function saveCart(c){localStorage.setItem("cart",JSON.stringify(c));updateCartCount();}

function toggleCart(p){
  let cart=getCart();
  const exists=cart.find(c=>c.id===p.id);
  if(exists){cart=cart.filter(c=>c.id!==p.id);showToast("‚ùå –£–¥–∞–ª–µ–Ω–æ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã");}
  else{cart.push(p);showToast("‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∫–æ—Ä–∑–∏–Ω—É");}
  saveCart(cart);render();
}
function updateCartCount(){document.getElementById("cartCount").textContent=getCart().length;}

// Toaster
function showToast(msg){
  const t=document.createElement("div");
  t.className="toast";t.innerText=msg;
  document.getElementById("toaster").appendChild(t);
  setTimeout(()=>t.classList.add("show"),50);
  setTimeout(()=>{t.classList.remove("show");setTimeout(()=>t.remove(),300);},2000);
}

let currentCategory="all";
function render(){
  let sorted=[...products];
  const sort=document.getElementById("sortSelect").value;
  if(sort==="price-asc")sorted.sort((a,b)=>a.price-b.price);
  else if(sort==="price-desc")sorted.sort((a,b)=>b.price-a.price);
  else if(sort==="popular")sorted.sort((a,b)=>b.popularity-a.popularity);

  let filtered=sorted.filter(p=>currentCategory==="all"||p.category===currentCategory);
  const cart=getCart();
  document.getElementById("grid").innerHTML=filtered.map(p=>{
    const inCart=cart.some(c=>c.id===p.id);
    return `<div class="card">
      <div class="name">${p.name}</div>
      <div class="price">${p.price} TON</div>
      <button class="btn" onclick='toggleCart(${JSON.stringify(p)})'>
        ${inCart?"–£–±—Ä–∞—Ç—å":"–î–æ–±–∞–≤–∏—Ç—å"}
      </button>
    </div>`;
  }).join("");
  updateCartCount();
}

document.querySelectorAll(".filter-btn").forEach(btn=>{
  btn.addEventListener("click",()=>{
    document.querySelectorAll(".filter-btn").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");currentCategory=btn.dataset.category;render();
  });
});
document.getElementById("sortSelect").addEventListener("change",render);

render();
</script>
</body>
</html>
