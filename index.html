<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TONFiles Market</title>
<style>
:root {
  --bg:#0f1220; --card:#171a2a; --text:#e8ebff; --muted:#9aa3c7;
  --accent:#6ea8ff; --accent-2:#7b6cff;
  --shadow:0 10px 30px rgba(0,0,0,0.25); --radius:18px;
}
*{box-sizing:border-box;margin:0;padding:0;}
body{
  font-family: Inter, sans-serif;
  background:var(--bg); color:var(--text);
  display:flex; flex-direction:column; height:100vh; overflow:hidden;
}
header{padding:16px; text-align:center; font-size:20px; font-weight:600;}
main{flex:1; overflow-y:auto; padding:12px; padding-bottom:80px;}
/* Grid */
.grid{
  display:grid; gap:16px;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
}
.card{
  background:var(--card); border-radius:var(--radius);
  padding:14px; box-shadow:var(--shadow);
  display:flex; flex-direction:column; gap:10px;
  transition:transform 0.2s, box-shadow 0.2s;
}
.card:hover{transform:translateY(-3px); box-shadow:0 15px 35px rgba(0,0,0,0.35);}
.card img{
  width:100%; height:140px; object-fit:cover; border-radius:var(--radius);
}
.card .name{font-size:16px; font-weight:600;}
.card .category{font-size:13px; color:var(--muted);}
.card .price{font-size:14px; font-weight:700; color:var(--accent);}
.btn{
  padding:10px 14px; border-radius:12px;
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  border:none; color:#fff; cursor:pointer; font-weight:600;
  transition:0.2s; text-align:center;
}
.btn:hover{opacity:0.9;}
/* Bottom nav */
nav{
  position:fixed; bottom:0; left:0; right:0;
  background:var(--card); display:flex; justify-content:space-around;
  padding:8px 0; box-shadow:0 -4px 12px rgba(0,0,0,0.4);
}
nav button{
  flex:1; background:none; border:none; color:var(--text);
  font-size:14px; display:flex; flex-direction:column; align-items:center;
  gap:4px; cursor:pointer; padding:6px 0; position:relative;
}
nav button.active{color:var(--accent);}
nav button .badge{
  position:absolute; top:0; right:25%; background:#ff4444;
  color:#fff; font-size:12px; padding:1px 6px; border-radius:12px;
}
/* Tabs */
.tab{display:none;}
.tab.active{display:block;}
/* Search & filters */
.search-bar{margin-bottom:12px;}
.search-bar input{
  width:100%; padding:10px; border-radius:12px; border:none;
  background:#1e2235; color:var(--text); font-size:14px;
}
.filters{display:flex; gap:8px; flex-wrap:wrap; margin-bottom:12px;}
.filters select, .filters input{
  padding:6px 10px; border-radius:10px; border:none; background:#1e2235; color:var(--text); font-size:13px;
}
/* Modal */
.modal{
  position:fixed; top:0; left:0; right:0; bottom:0;
  background:rgba(0,0,0,0.6); display:none; justify-content:center; align-items:center;
  z-index:1000; padding:16px;
}
.modal.active{display:flex;}
.modal-content{
  background:var(--card); padding:20px; border-radius:var(--radius);
  max-width:400px; width:100%; box-shadow:var(--shadow); position:relative;
}
.modal-content h3{margin-bottom:10px;}
.modal-content p{margin-bottom:10px; font-size:14px; color:var(--muted);}
.modal-content .rating{margin-bottom:10px;}
.star{color:gold; font-size:18px;}
.close-btn{background:none; border:none; color:var(--muted); font-size:20px; cursor:pointer; position:absolute; top:20px; right:20px;}
/* Form */
#addForm{
  display:flex; flex-direction:column; gap:14px;
  background:var(--card); padding:16px; border-radius:var(--radius);
  box-shadow:var(--shadow);
}
.form-group{display:flex; flex-direction:column; gap:6px;}
.form-group label{font-size:14px; color:var(--muted);}
#addForm input, #addForm textarea, #addForm select{
  padding:10px; border-radius:12px; border:none;
  background:#1e2235; color:var(--text); font-size:14px;
}
#addForm textarea{min-height:70px; resize:vertical;}
#imagePreview{
  width:100%; height:180px; border-radius:var(--radius);
  background:#1e2235; display:flex; justify-content:center; align-items:center;
  color:var(--muted); font-size:14px; overflow:hidden;
}
#imagePreview img{width:100%; height:100%; object-fit:cover;}
</style>
</head>
<body>
<header>TONFiles Market</header>
<main>
  <!-- –ì–ª–∞–≤–Ω–∞—è -->
  <div id="homeTab" class="tab active">
    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="üîç –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤...">
    </div>
    <div class="filters">
      <select id="categoryFilter">
        <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
        <option value="–ì–∞–π–¥—ã">–ì–∞–π–¥—ã</option>
        <option value="–°–∫—Ä–∏–ø—Ç—ã">–°–∫—Ä–∏–ø—Ç—ã</option>
        <option value="–§–∞–π–ª—ã">–§–∞–π–ª—ã</option>
      </select>
      <input type="number" id="minPrice" placeholder="–ú–∏–Ω. —Ü–µ–Ω–∞">
      <input type="number" id="maxPrice" placeholder="–ú–∞–∫—Å. —Ü–µ–Ω–∞">
      <select id="sortSelect">
        <option value="">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</option>
        <option value="sales">–ü–æ –ø—Ä–æ–¥–∞–∂–∞–º</option>
        <option value="priceAsc">–¶–µ–Ω–∞ ‚Üë</option>
        <option value="priceDesc">–¶–µ–Ω–∞ ‚Üì</option>
      </select>
    </div>
    <div class="grid" id="productGrid"></div>
  </div>
  <!-- –ö–æ—Ä–∑–∏–Ω–∞ -->
  <div id="cartTab" class="tab">
    <h2>–ö–æ—Ä–∑–∏–Ω–∞</h2>
    <div id="cartItems"></div>
  </div>
  <!-- –î–æ–±–∞–≤–∏—Ç—å -->
  <div id="addTab" class="tab">
    <h2>–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</h2>
    <form id="addForm">
      <div class="form-group">
        <label for="newName">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
        <input type="text" id="newName" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ" required>
      </div>
      <div class="form-group">
        <label for="newDesc">–û–ø–∏—Å–∞–Ω–∏–µ</label>
        <textarea id="newDesc" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ" required></textarea>
      </div>
      <div class="form-group">
        <label for="newCategory">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
        <select id="newCategory" required>
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
          <option value="–ì–∞–π–¥—ã">–ì–∞–π–¥—ã</option>
          <option value="–°–∫—Ä–∏–ø—Ç—ã">–°–∫—Ä–∏–ø—Ç—ã</option>
          <option value="–§–∞–π–ª—ã">–§–∞–π–ª—ã</option>
        </select>
      </div>
      <div class="form-group">
        <label for="newPrice">–¶–µ–Ω–∞ (TON)</label>
        <input type="number" id="newPrice" placeholder="–£–∫–∞–∂–∏—Ç–µ —Ü–µ–Ω—É" required>
      </div>
      <div class="form-group">
        <label for="newImage">–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è —Ç–æ–≤–∞—Ä–∞</label>
        <div id="imagePreview">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>
        <input type="file" id="newImage" accept="image/*">
      </div>
      <button class="btn" type="submit">‚úÖ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä</button>
    </form>
  </div>
</main>
<!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
<nav>
  <button data-tab="homeTab" class="active">üè† –ì–ª–∞–≤–Ω–∞—è</button>
  <button data-tab="cartTab">üõí –ö–æ—Ä–∑–∏–Ω–∞ <span class="badge" id="cartBadge">0</span></button>
  <button data-tab="addTab">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
</nav>
<!-- –ú–æ–¥–∞–ª–∫–∞ -->
<div class="modal" id="previewModal">
  <div class="modal-content">
    <button class="close-btn" onclick="closePreview()">‚úñ</button>
    <img id="modalImg" src="" alt="" style="width:100%;height:160px;object-fit:cover;border-radius:var(--radius);margin-bottom:12px;">
    <h3 id="modalName"></h3>
    <p id="modalDesc"></p>
    <div class="rating" id="modalRating"></div>
    <p class="price" id="modalPrice"></p>
    <button class="btn" id="modalAddBtn">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
  </div>
</div>
<script>
let products=[
  {id:1,name:"–ì–∞–π–¥ –ø–æ TON",desc:"–ü–æ–¥—Ä–æ–±–Ω—ã–π –º–∞–Ω—É–∞–ª –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤",category:"–ì–∞–π–¥—ã",price:5,sales:10,rating:4,img:"https://placehold.co/400x200?text=–ì–∞–π–¥"},
  {id:2,name:"–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ—Ñ–∞—Ä–º",desc:"–°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏",category:"–°–∫—Ä–∏–ø—Ç—ã",price:15,sales:25,rating:5,img:"https://placehold.co/400x200?text=–°–∫—Ä–∏–ø—Ç"},
  {id:3,name:"–§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏",desc:"–ì–æ—Ç–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏",category:"–§–∞–π–ª—ã",price:2,sales:5,rating:3,img:"https://placehold.co/400x200?text=–§–∞–π–ª"}
];
let cart=[];
/* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
document.querySelectorAll("nav button").forEach(btn=>{
  btn.addEventListener("click",()=>{
    document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
    document.querySelectorAll(".tab").forEach(tab=>tab.classList.remove("active"));
    document.getElementById(btn.dataset.tab).classList.add("active");
  });
});
/* –†–µ–Ω–¥–µ—Ä */
function renderProducts(){
  const grid=document.getElementById("productGrid");
  const query=document.getElementById("searchInput").value.toLowerCase();
  const cat=document.getElementById("categoryFilter").value;
  const min=document.getElementById("minPrice").value;
  const max=document.getElementById("maxPrice").value;
  const sort=document.getElementById("sortSelect").value;
  let filtered=products.filter(p=>
    p.name.toLowerCase().includes(query) &&
    (!cat||p.category===cat) &&
    (!min||p.price>=min) &&
    (!max||p.price<=max)
  );
  if(sort==="sales") filtered.sort((a,b)=>b.sales-a.sales);
  if(sort==="priceAsc") filtered.sort((a,b)=>a.price-b.price);
  if(sort==="priceDesc") filtered.sort((a,b)=>b.price-a.price);
  grid.innerHTML=filtered.map(p=>`
    <div class="card">
      <img src="${p.img}" alt="">
      <div class="name">${p.name}</div>
      <div class="category">${p.category}</div>
      <div class="price">${p.price} TON</div>
      <button class="btn" onclick="openPreview(${p.id})">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
    </div>
  `).join("");
}
/* –ö–æ—Ä–∑–∏–Ω–∞ */
function renderCart(){
  const c=document.getElementById("cartItems");
  if(cart.length===0){c.innerHTML="<p>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>";return;}
  c.innerHTML=cart.map(item=>`
    <div class="card">
      <img src="${item.img}" alt="">
      <div class="name">${item.name}</div>
      <div class="price">${item.price} TON</div>
      <button class="btn" onclick="removeFromCart(${item.id})">–£–¥–∞–ª–∏—Ç—å</button>
    </div>
  `).join("");
  document.getElementById("cartBadge").textContent=cart.length;
}
function addToCart(p){
  if(!cart.some(i=>i.id===p.id)){cart.push(p);}
  renderCart();
}
function removeFromCart(id){
  cart=cart.filter(i=>i.id!==id);
  renderCart();
}
/* –ú–æ–¥–∞–ª–∫–∞ */
function openPreview(id){
  const p=products.find(x=>x.id===id);
  if(!p) return;
  document.getElementById("modalName").textContent=p.name;
  document.getElementById("modalDesc").textContent=p.desc;
  document.getElementById("modalPrice").textContent=p.price+" TON";
  document.getElementById("modalRating").innerHTML="‚òÖ".repeat(p.rating)+"‚òÜ".repeat(5-p.rating);
  document.getElementById("modalImg").src=p.img;
  document.getElementById("modalAddBtn").onclick=()=>{addToCart(p);closePreview();};
  document.getElementById("previewModal").classList.add("active");
}
function closePreview(){document.getElementById("previewModal").classList.remove("active");}
/* –î–æ–±–∞–≤–ª–µ–Ω–∏–µ */
document.getElementById("newImage").addEventListener("change",e=>{
  const file=e.target.files[0];
  if(file){
    const reader=new FileReader();
    reader.onload=ev=>{
      document.getElementById("imagePreview").innerHTML=`<img src="${ev.target.result}">`;
      document.getElementById("imagePreview").dataset.src=ev.target.result;
    };
    reader.readAsDataURL(file);
  }
});
document.getElementById("addForm").addEventListener("submit",e=>{
  e.preventDefault();
  const name=document.getElementById("newName").value;
  const desc=document.getElementById("newDesc").value;
  const cat=document.getElementById("newCategory").value;
  const price=parseFloat(document.getElementById("newPrice").value);
  const img=document.getElementById("imagePreview").dataset.src||"https://placehold.co/400x200?text=No+Image";
  if(!name||!desc||!cat||!price)return;
  products.push({id:Date.now(),name,desc,category:cat,price,sales:0,rating:0,img});
  renderProducts();
  e.target.reset();
  document.getElementById("imagePreview").innerHTML="–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è";
  delete document.getElementById("imagePreview").dataset.src;
});
/* –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã */
document.getElementById("searchInput").addEventListener("input",renderProducts);
document.getElementById("categoryFilter").addEventListener("change",renderProducts);
document.getElementById("minPrice").addEventListener("input",renderProducts);
document.getElementById("maxPrice").addEventListener("input",renderProducts);
document.getElementById("sortSelect").addEventListener("change",renderProducts);
/* Init */
renderProducts();renderCart();
</script>
</body>
</html>
