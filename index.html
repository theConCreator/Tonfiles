<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>TONFiles Market</title>
<style>
:root {
  --bg:#0b0f1a; --card:#111625; --text:#ffffff; --muted:#9aa3c7;
  --accent:#00cfff; --btn:#1a2335; --btn-hover:#009fcc;
  --shadow:0 10px 30px rgba(0,0,0,0.25); --radius:16px;
}
body{margin:0; font-family:sans-serif; background:var(--bg); color:var(--text);}
.wrap{max-width:1200px; margin:0 auto; padding:16px;}
header{display:flex; justify-content:center; align-items:center; padding:20px;}
h1{font-size:22px; margin:0;}
.search-box{margin:0 0 20px;}
.search-box input{
  width:100%; padding:12px 16px; border-radius:12px; border:none; outline:none;
  background:#1a1f2e; color:var(--text); font-size:15px;
  box-shadow:inset 0 2px 6px rgba(0,0,0,0.25); box-sizing:border-box;
}
.grid{display:grid; grid-template-columns:repeat(1,1fr); gap:18px;}
@media (min-width:768px){.grid{grid-template-columns:repeat(2,1fr);}}
@media (min-width:1024px){.grid{grid-template-columns:repeat(3,1fr);}}
@media (min-width:1400px){.grid{grid-template-columns:repeat(4,1fr);}}
.card{
  background:var(--card); border-radius:var(--radius); padding:16px;
  box-shadow:var(--shadow); display:flex; flex-direction:column;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.card:hover{transform: scale(1.03); box-shadow: 0 15px 35px rgba(0,0,0,0.35);}
.card h3{margin:10px 0 6px; font-size:16px;}
.card p{margin:0 0 10px; font-size:14px; color:var(--muted);}
.price{font-weight:700; margin-bottom:10px;}
.tags span{
  margin-right:6px; font-size:12px; color:var(--accent); cursor:pointer;
}
.actions{display:flex; gap:8px; margin-top:auto;}
.btn{
  flex:1; padding:10px; border-radius:10px; border:none; cursor:pointer;
  background:var(--btn); color:var(--text); font-weight:600; transition:0.2s;
}
.btn:hover{background:var(--btn-hover);}
.btn-accent{background:var(--accent); color:#000;}
.btn-accent:hover{background:#00a0cc;}
.fav{background:#222; color:#ffcc00;}
.fav.active{background:#ffcc00; color:#000;}
.rating{margin:8px 0; font-size:14px; color:#ffcc00;}
.notice{margin-top:24px; font-size:14px; color:var(--muted); text-align:center;}
/* Modal */
.modal{
  position:fixed; top:0; left:0; width:100%; height:100%;
  background:rgba(0,0,0,0.8); display:none; justify-content:center; align-items:center;
}
.modal-content{
  background:var(--card); padding:20px; border-radius:var(--radius);
  max-width:90%; max-height:90%; overflow:auto;
}
.modal iframe, .modal img{width:100%; height:70vh; border:none; border-radius:10px;}
.modal-close{margin-top:10px; padding:8px 14px; background:var(--accent); border:none; border-radius:8px; cursor:pointer;}
</style>
</head>
<body>
<header class="wrap">
  <h1>TONFiles Market</h1>
</header>

<main class="wrap">
  <div class="search-box">
    <input type="text" id="searchInput" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ —Ç–µ–≥–∞–º...">
  </div>
  <div class="grid" id="grid"></div>
  <p class="notice">–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å –º–∞–Ω—É–∞–ª–æ–≤ –∏ —Ñ–∞–π–ª–æ–≤ –∑–∞ TON. –ü–æ–¥–¥–µ—Ä–∂–∫–∞: <a href="https://t.me/theConCreator" target="_blank">@theConCreator</a></p>
</main>

<!-- Modal Preview -->
<div class="modal" id="previewModal">
  <div class="modal-content">
    <div id="previewBox"></div>
    <button class="modal-close" onclick="closePreview()">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<script>
const products = [
  {id:1,name:"TON Trading Guide",price:5,desc:"–ü–æ–ª–Ω—ã–π –≥–∞–π–¥ –ø–æ —Ç–æ—Ä–≥–æ–≤–ª–µ –Ω–∞ TON.",tags:["#Trading","#Guide"],file:"guide.pdf",preview:"preview1.png",rating:4},
  {id:2,name:"NFT Basics",price:3,desc:"–í–≤–µ–¥–µ–Ω–∏–µ –≤ NFT –Ω–∞ TON.",tags:["#NFT","#Basics"],file:"nft.pdf",preview:"preview2.png",rating:5},
  {id:3,name:"Crypto Bot Tutorial",price:4,desc:"–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CryptoBot API.",tags:["#CryptoBot","#Tutorial"],file:"crypto_tutorial.pdf",preview:"preview3.png",rating:3},
  {id:4,name:"Advanced NFT Strategies",price:6,desc:"–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ NFT.",tags:["#NFT","#Advanced"],file:"advanced_nft.pdf",preview:"preview4.png",rating:4}
];

let favorites = JSON.parse(localStorage.getItem("favorites")||"[]");
let purchases = JSON.parse(localStorage.getItem("purchases")||"[]");

function render(){
  const q=document.getElementById("searchInput").value.toLowerCase();
  const filtered=products.filter(p=>
    p.name.toLowerCase().includes(q) || p.tags.some(t=>t.toLowerCase().includes(q))
  );
  document.getElementById("grid").innerHTML=filtered.map(p=>{
    const favActive = favorites.includes(p.id)?"active":"";
    const bought = purchases.includes(p.id);
    return `
      <div class="card">
        <h3>${p.name}</h3>
        <p>${p.desc}</p>
        <div class="price">${p.price} TON</div>
        <div class="tags">${p.tags.map(t=>`<span onclick="filterTag('${t}')">${t}</span>`).join("")}</div>
        <div class="rating">‚≠ê ${p.rating}/5</div>
        <div class="actions">
          <button class="btn btn-accent" onclick="buy(${p.id})">${bought?"–°–∫–∞—á–∞—Ç—å":"–ö—É–ø–∏—Ç—å"}</button>
          <button class="btn" onclick="preview(${p.id})">Preview</button>
          <button class="btn fav ${favActive}" onclick="toggleFav(${p.id})">‚òÖ</button>
        </div>
      </div>
    `;
  }).join("");
}

function buy(id){
  if(!purchases.includes(id)) purchases.push(id);
  localStorage.setItem("purchases",JSON.stringify(purchases));
  alert("–ü–æ–∫—É–ø–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! (–∏–º–∏—Ç–∞—Ü–∏—è)");
  render();
}

function preview(id){
  const p=products.find(x=>x.id===id);
  const box=document.getElementById("previewBox");
  if(p.file.endsWith(".pdf")){
    box.innerHTML=`<iframe src="${p.file}"></iframe>`;
  }else{
    box.innerHTML=`<img src="${p.preview}" alt="preview">`;
  }
  document.getElementById("previewModal").style.display="flex";
}

function closePreview(){ document.getElementById("previewModal").style.display="none"; }

function toggleFav(id){
  if(favorites.includes(id)) favorites=favorites.filter(x=>x!==id);
  else favorites.push(id);
  localStorage.setItem("favorites",JSON.stringify(favorites));
  render();
}

function filterTag(tag){
  document.getElementById("searchInput").value=tag;
  render();
}

document.getElementById("searchInput").addEventListener("input",render);
render();
</script>
</body>
</html>
