<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TonFiles Market</title>
<style>
body {
  margin: 0;
  font-family: "Inter", sans-serif;
  background-color: #0d0d0d;
  color: white;
}

header {
  background: #101010;
  border-bottom: 1px solid #222;
  display: flex;
  justify-content: space-around;
  align-items: center;
  padding: 10px;
  position: sticky;
  top: 0;
  z-index: 10;
}

header button {
  background: none;
  border: none;
  color: #36ff12;
  font-weight: 600;
  cursor: pointer;
  font-size: 16px;
}

header button.active {
  border-bottom: 2px solid #36ff12;
}

main {
  padding: 20px;
  display: none;
}

main.active {
  display: block;
}

/* карточки */
.cards {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 20px;
}

.card {
  background: #141414;
  border-radius: 16px;
  padding: 15px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  transition: transform 0.2s ease;
}

.card:hover {
  transform: translateY(-4px);
}

.card img {
  width: 100%;
  height: 150px;
  object-fit: cover;
  border-radius: 10px;
}

.card .info {
  display: flex;
  justify-content: space-between;
  margin-top: 8px;
  font-size: 14px;
  color: #bbb;
  align-items: center;
}

.card .price-ton {
  display: inline-flex;
  align-items: center;
  gap: 3px;
}

.price-ton img {
  width: 14px;
  height: 14px;
  vertical-align: middle;
}

.card button {
  background: #36ff12;
  color: #000;
  border: none;
  padding: 8px 0;
  font-weight: 600;
  border-radius: 8px;
  margin-top: 8px;
  cursor: pointer;
  transition: 0.2s;
}

.card button:hover {
  background: #2be00f;
}

/* всплывающее окно товара */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0,0,0,0.7);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 20;
}

.modal.active {
  display: flex;
}

.modal-content {
  background: #141414;
  border-radius: 20px;
  padding: 20px;
  max-width: 420px;
  width: 90%;
  position: relative;
  animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.modal-content img {
  width: 100%;
  height: 200px;
  border-radius: 10px;
  object-fit: cover;
}

.close-btn {
  position: absolute;
  top: 8px;
  right: 10px;
  font-size: 22px;
  color: #aaa;
  cursor: pointer;
}

.modal-content .rating {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 15px;
  color: #bbb;
  margin: 8px 0;
}

.modal-content .rating span.star {
  cursor: pointer;
  font-size: 20px;
  color: #444;
  transition: color 0.2s;
}

.modal-content .rating span.star.active {
  color: #36ff12;
}

.modal-content button {
  background: #36ff12;
  border: none;
  border-radius: 10px;
  color: #000;
  font-weight: 600;
  width: 100%;
  padding: 10px;
  margin-top: 10px;
}

/* профиль продавца всплывающее окно */
.profile-popup {
  position: fixed;
  bottom: -100%;
  left: 0;
  right: 0;
  background: #141414;
  border-top-left-radius: 20px;
  border-top-right-radius: 20px;
  z-index: 25;
  transition: bottom 0.4s ease;
  max-height: 85%;
  overflow-y: auto;
  padding: 20px;
}

.profile-popup.active {
  bottom: 0;
}

.profile-popup .close {
  position: absolute;
  top: 10px;
  right: 15px;
  font-size: 22px;
  color: #888;
  cursor: pointer;
}

.profile-header {
  display: flex;
  align-items: center;
  gap: 15px;
  margin-top: 30px;
}

.profile-header img {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  object-fit: cover;
}

.profile-info h3 {
  margin: 0;
  font-size: 18px;
}

.profile-info p {
  margin: 3px 0;
  color: #999;
  font-size: 14px;
}

</style>
</head>
<body>

<header>
  <button class="tab-btn active" data-tab="home">Главная</button>
  <button class="tab-btn" data-tab="publish">Публикация</button>
  <button class="tab-btn" data-tab="profile">Профиль</button>
</header>

<!-- Главная -->
<main id="home" class="active">
  <div class="cards" id="productList"></div>
</main>

<!-- Публикация -->
<main id="publish">
  <h2>Публикация объявления</h2>
  <input type="text" id="title" placeholder="Название" style="width:100%;padding:8px;margin:8px 0;border-radius:8px;">
  <textarea id="desc" placeholder="Описание" style="width:100%;height:80px;padding:8px;border-radius:8px;"></textarea>
  <input type="number" id="price" placeholder="Цена (TON)" min="0" step="0.1" style="width:100%;padding:8px;margin-top:8px;border-radius:8px;">
  <input type="file" id="image" accept="image/*" style="margin-top:8px;">
  <button id="publishBtn">Опубликовать</button>
</main>

<!-- Профиль -->
<main id="profile">
  <h2>Мой профиль</h2>
  <div class="cards" id="myProducts"></div>
</main>

<!-- Всплывающее окно товара -->
<div class="modal" id="productModal">
  <div class="modal-content">
    <span class="close-btn" id="closeModal">&times;</span>
    <img id="modalImg" src="">
    <h3 id="modalTitle"></h3>
    <div class="rating" id="modalRating"></div>
    <p id="modalDesc"></p>
    <button id="buyBtn"></button>
  </div>
</div>

<!-- Всплывающее окно профиля продавца -->
<div class="profile-popup" id="sellerPopup">
  <span class="close" id="closeSeller">&times;</span>
  <div class="profile-header">
    <img id="sellerImg" src="https://via.placeholder.com/64">
    <div class="profile-info">
      <h3 id="sellerName">username</h3>
      <p id="sellerStats">Товаров: 0 • Рейтинг: —</p>
    </div>
  </div>
  <h3 style="margin-top:15px;">Товары продавца</h3>
  <div class="cards" id="sellerProducts"></div>
</div>

<script>
const tabs = document.querySelectorAll('.tab-btn');
const sections = document.querySelectorAll('main');
tabs.forEach(btn=>{
  btn.onclick=()=>{
    tabs.forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    sections.forEach(s=>s.classList.remove('active'));
    document.getElementById(btn.dataset.tab).classList.add('active');
  }
});

const products = [
  {id:1,title:'TON Storage',desc:'Надёжное облако в TON',price:2.3,img:'https://picsum.photos/300/200?1',rating:4.8,rates:23,seller:'@tonman'},
  {id:2,title:'TON Wallet',desc:'Безопасный кошелёк',price:1.1,img:'https://picsum.photos/300/200?2',rating:5.0,rates:15,seller:'@cryptofox'},
];

function renderProducts(list,container){
  container.innerHTML='';
  list.forEach(p=>{
    const c=document.createElement('div');
    c.className='card';
    c.innerHTML=`
      <img src="${p.img}">
      <div class="info">
        <span>${p.rating}★</span>
        <span class="price-ton">${p.price}<img src="ton1.svg"></span>
      </div>
      <button>${p.mine?'Мой товар':'Купить'}</button>
    `;
    c.querySelector('button').onclick=()=>openModal(p);
    container.appendChild(c);
  });
}

renderProducts(products,document.getElementById('productList'));
renderProducts(products,document.getElementById('myProducts'));

const modal=document.getElementById('productModal');
const closeModal=document.getElementById('closeModal');
const modalImg=document.getElementById('modalImg');
const modalTitle=document.getElementById('modalTitle');
const modalDesc=document.getElementById('modalDesc');
const modalRating=document.getElementById('modalRating');
const buyBtn=document.getElementById('buyBtn');

function openModal(p){
  modalImg.src=p.img;
  modalTitle.textContent=p.title;
  modalDesc.textContent=p.desc;
  modalRating.innerHTML=`<span>⭐ ${p.rating} (${p.rates}) • ${p.price}<img src="ton1.svg" style="width:14px;height:14px;vertical-align:middle;"></span>`;
  buyBtn.textContent=p.mine?'Мой товар':`Купить за ${p.price} TON`;
  modal.classList.add('active');
}

closeModal.onclick=()=>modal.classList.remove('active');

document.getElementById('publishBtn').onclick=()=>{
  document.getElementById('title').value='';
  document.getElementById('desc').value='';
  document.getElementById('price').value='';
  document.getElementById('image').value='';
  alert('Товар опубликован!');
};

// профиль продавца
const sellerPopup=document.getElementById('sellerPopup');
document.getElementById('closeSeller').onclick=()=>sellerPopup.classList.remove('active');

// пример вызова окна продавца
function openSeller(seller){
  sellerPopup.classList.add('active');
  document.getElementById('sellerName').textContent=seller;
  document.getElementById('sellerProducts').innerHTML='';
  renderProducts(products.filter(p=>p.seller===seller),document.getElementById('sellerProducts'));
}
</script>
</body>
</html>
